<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∫–∞–Ω–∞–ª—ã - Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/channels.css') }}">
</head>
<body>
<div class="container">
        <!-- Hero Section –∫–∞–∫ –≤ index.html -->
        <div class="hero-section">
            <button class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="hero-content">
                <span class="hero-icon">üì∫</span>
                <h1 class="hero-title">–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</h1>
                <p class="hero-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º–∏ Telegram –∫–∞–Ω–∞–ª–∞–º–∏</p>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ç–∞–±–∞–º –≤ —Å—Ç–∏–ª–µ index.html -->
        <div class="tabs-container" style="margin-bottom: 32px;">
            <div class="tab-nav" style="display: none;">
                <!-- –°–∫—Ä—ã—Ç—ã–µ —Ç–∞–±—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å JS -->
                <button class="tab-btn active" data-tab="channels">–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</button>
                <button class="tab-btn" data-tab="offers">–í—Ö–æ–¥—è—â–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</button>
                <button class="tab-btn" data-tab="add-channel">–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª</button>
                <button class="tab-btn" data-tab="analytics">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
            </div>
        </div>

        <div class="navigation-grid">
            <div class="nav-card active" data-tab="channels" onclick="switchTab('channels')">
                <div class="nav-icon">üì∫</div>
                <div class="nav-content">
                    <h3>–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</h3>
                    <p>–°–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤</p>
                </div>
            </div>

            <div class="nav-card" data-tab="offers" onclick="switchTab('offers')">
                <div class="nav-icon">üì¨</div>
                <div class="nav-content">
                    <h3>–í—Ö–æ–¥—è—â–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h3>
                    <p>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª–µ–π</p>
                </div>
            </div>

            <div class="nav-card" data-tab="add-channel" onclick="switchTab('add-channel')">
                <div class="nav-icon">‚ûï</div>
                <div class="nav-content">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª</h3>
                    <p>–ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π Telegram –∫–∞–Ω–∞–ª</p>
                </div>
            </div>

            <div class="nav-card" data-tab="analytics" onclick="switchTab('analytics')">
                <div class="nav-icon">üìä</div>
                <div class="nav-content">
                    <h3>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                    <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –¥–æ—Ö–æ–¥—ã</p>
                </div>
            </div>
        </div>

        <!-- Tab: –ú–æ–∏ –∫–∞–Ω–∞–ª—ã -->
        <div class="tab-content active" id="channels">
            <!-- Action Bar –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å JS -->
            <div class="action-bar" style="display: flex; justify-content: space-between; align-items: center; gap: 16px; margin-bottom: 24px; flex-wrap: wrap;">
                <div class="search-container" style="position: relative; flex: 1; min-width: 280px; max-width: 400px;">
                    <div class="search-icon" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 16px;">üîç</div>
                    <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–∞–Ω–∞–ª–∞–º..." id="channelSearch">
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–∞–∫ –≤ index.html -->
            <div class="stats-grid" id="channelsGrid">
                <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
                <div class="empty-state" style="grid-column: 1 / -1; display: none;" id="emptyState">
                    <div class="stat-icon">üì∫</div>
                    <h3>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤</h3>
                    <p>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è–º–∏</p>
                    <button class="btn btn-primary" onclick="switchTab('add-channel')">
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª
                    </button>
                </div>
            </div>
        </div>

        <!-- Tab: –í—Ö–æ–¥—è—â–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è -->
        <div class="tab-content" id="offers">
            <div class="empty-state">
                <div class="stat-icon">üì¨</div>
                <h3>–í—Ö–æ–¥—è—â–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h3>
                <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª–µ–π –¥–ª—è –≤–∞—à–∏—Ö –∫–∞–Ω–∞–ª–æ–≤.</p>
                <div style="background: var(--bg-secondary); padding: 16px; border-radius: var(--border-radius-sm); margin-top: 16px;">
                    <strong>–ü–æ–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–µ—Ç</strong><br>
                    –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–∞–Ω–∞–ª–æ–≤ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª–µ–π.
                </div>
            </div>
        </div>

        <!-- Tab: –î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª -->
        <div class="tab-content" id="add-channel">
            <div class="form-section">
                <div class="form-header">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª</h3>
                    <p>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à Telegram –∫–∞–Ω–∞–ª –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ</p>
                </div>

                <form class="form-body" id="addChannelForm">
                    <div class="form-group">
                        <label class="form-label" for="channelUrl">
                            –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª <span class="required">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-prefix">@</span>
                            <input type="text" id="channelUrl" class="form-input"
                                   placeholder="username_–∫–∞–Ω–∞–ª–∞ –∏–ª–∏ t.me/username" required>
                        </div>
                        <div class="form-hint">
                            –í–≤–µ–¥–∏—Ç–µ username –∫–∞–Ω–∞–ª–∞ –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ @
                        </div>
                    </div>

                    <!-- –ü—Ä–µ–≤—å—é –∫–∞–Ω–∞–ª–∞ -->
                    <div class="channel-preview" id="channelPreview">
                        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>

                    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è -->
                    <div id="additionalFields" style="display: none;">
                        <div class="form-group">
                            <label class="form-label" for="channelCategory">
                                –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∫–∞–Ω–∞–ª–∞ <span class="required">*</span>
                            </label>
                            <select id="channelCategory" class="form-input form-select" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                <option value="technology">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ IT</option>
                                <option value="business">–ë–∏–∑–Ω–µ—Å –∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ</option>
                                <option value="education">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</option>
                                <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                <option value="lifestyle">–°—Ç–∏–ª—å –∂–∏–∑–Ω–∏</option>
                                <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                                <option value="finance">–§–∏–Ω–∞–Ω—Å—ã –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</option>
                                <option value="other">–î—Ä—É–≥–æ–µ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="channelDescription">
                                –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
                            </label>
                            <textarea id="channelDescription" class="form-input form-textarea"
                                      placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º–∞—Ç–∏–∫–∏ –∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞"></textarea>
                        </div>
                    </div>

                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω -->
                    <div id="pricingFields" style="display: none;">
                        <div class="form-group">
                            <label class="form-label" for="pricePerPost">
                                –¶–µ–Ω–∞ –∑–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ (‚ÇΩ) <span class="required">*</span>
                            </label>
                            <input type="number" id="pricePerPost" class="form-input"
                                   placeholder="–£–∫–∞–∂–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ø–æ—Å—Ç–∞" min="100" required>
                            <div class="form-hint">
                                –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: 100‚ÇΩ
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="paymentTerms">
                                –£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã
                            </label>
                            <select id="paymentTerms" class="form-input form-select">
                                <option value="prepayment">–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 100%</option>
                                <option value="after_posting">–ü–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</option>
                                <option value="50_50">50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ + 50% –ø–æ—Å–ª–µ</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-primary" id="submitBtn" disabled>
                            üíæ –î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tab: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
        <div class="tab-content" id="analytics">
            <div class="empty-state">
                <div class="stat-icon">üìä</div>
                <h3>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–Ω–∞–ª–æ–≤</h3>
                <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤–∞—à–∏–º –∫–∞–Ω–∞–ª–∞–º.</p>
                <div style="background: var(--bg-secondary); padding: 16px; border-radius: var(--border-radius-sm); margin-top: 16px;">
                    <strong>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</strong><br>
                    –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–æ—Ö–æ–¥–∞–º, –æ—Ö–≤–∞—Ç–∞–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤–∞—à–∏—Ö –∫–∞–Ω–∞–ª–æ–≤.
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="deleteChannelModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeDeleteModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª</h3>
                <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="confirmation-content">
                    <div class="channel-info" id="deleteChannelInfo">
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–∞–ª–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è -->
                    </div>
                    <div style="background: #fef3cd; border: 1px solid #f59e0b; border-radius: var(--border-radius-sm); padding: 16px; margin: 16px 0; color: #92400e;">
                        <strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</strong><br>
                        –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –ö–∞–Ω–∞–ª –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ —Å–∏—Å—Ç–µ–º—ã.
                    </div>
                    <div style="text-align: center; font-weight: 600; color: var(--text-primary); margin: 16px 0;">
                        –í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª?
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button class="btn btn-danger" id="confirmDeleteBtn" onclick="confirmChannelDeletion()">
                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div id="verificationModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîê –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–ª–∞–¥–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–º</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="verificationContent">
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button class="btn btn-primary" id="startVerificationBtn" onclick="startVerification()">
                    üöÄ –ù–∞—á–∞—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
                </button>
            </div>
        </div>
    </div>


<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JS –º–æ–¥—É–ª–µ–π -->
<script src="static/js/channels-analyzer.js"></script>
<script src="static/js/channels-core.js"></script>
<script src="static/js/channels-ui.js"></script>
<script src="static/js/channels-modals.js"></script>
<script src="static/js/channels-forms.js"></script>
<script src="static/js/utils.js"></script>
<script>
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
if (window.Telegram && window.Telegram.WebApp) {
    window.Telegram.WebApp.ready();
    window.Telegram.WebApp.expand();
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    console.log('üì∫ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–Ω–∞–ª–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞–Ω–∞–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (typeof loadUserChannels === 'function') {
        loadUserChannels();
    } else {
        console.error('‚ùå –§—É–Ω–∫—Ü–∏—è loadUserChannels –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
    }
});
</script>
</body>
