[{"stmt":"SELECT sql FROM sqlite_master WHERE type='table' AND name='contracts';","header":["sql"],"rows":[["CREATE TABLE contracts\n                   (\n                       id                   TEXT PRIMARY KEY,\n                       response_id          INTEGER        NOT NULL,\n                       offer_id             INTEGER        NOT NULL,\n                       advertiser_id        INTEGER        NOT NULL,\n                       publisher_id         INTEGER        NOT NULL,\n                       price                DECIMAL(12, 2) NOT NULL,\n                       status               TEXT     DEFAULT 'active',\n\n                       -- Временные рамки\n                       placement_deadline   DATETIME       NOT NULL,\n                       monitoring_duration  INTEGER  DEFAULT 7,\n                       monitoring_end       DATETIME       NOT NULL,\n\n                       -- Данные о размещении\n                       post_url             TEXT     DEFAULT '',\n                       post_id              TEXT     DEFAULT '',\n                       post_date            DATETIME NULL,\n                       submitted_at         DATETIME NULL,\n\n                       -- Проверка\n                       verification_passed  BOOLEAN  DEFAULT 0,\n                       verification_details TEXT     DEFAULT '',\n                       monitoring_started   DATETIME NULL,\n\n                       -- Завершение\n                       completed_at         DATETIME NULL,\n                       violation_reason     TEXT     DEFAULT '',\n\n                       -- Требования к посту\n                       post_requirements    TEXT     DEFAULT '',\n\n                       created_at           DATETIME DEFAULT CURRENT_TIMESTAMP,\n                       updated_at           DATETIME DEFAULT CURRENT_TIMESTAMP,\n\n                       FOREIGN KEY (response_id) REFERENCES offer_responses (id) ON DELETE CASCADE,\n                       FOREIGN KEY (offer_id) REFERENCES offers (id) ON DELETE CASCADE,\n                       FOREIGN KEY (advertiser_id) REFERENCES users (id) ON DELETE CASCADE,\n                       FOREIGN KEY (publisher_id) REFERENCES users (id) ON DELETE CASCADE,\n\n                       CHECK (status IN\n                              ('active', 'verification', 'verification_failed', 'monitoring', 'completed', 'expired',\n                               'violation', 'cancelled'))\n                   )"]]}]